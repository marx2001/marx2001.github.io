---
layout: post
title: "网站维护与操作手册"
subtitle: "Submition steps"
background: '/img/bg-sci-note.jpg'
categories: sci-note
permalink: /sci-note_posts/20250922-note/
---
此笔记作为维护和更新博客的操作手册：

##更新Log

1.复制_posts文件夹中的md文件

2.修改复制后的md文件中的开头front matter部分，可选择修改副标题和标题;categories根据Log的分类进行修改;permalink中根据需求进行修改，例如分类不同，就修改“分类_posts/日期-log”.如果是科研笔记，那么可以根据心情和内容自行修改内容

PS:写目录名，要写全名，比如根目录下的sci-note.md文件，目录名应该写sci-note，否则无法在对应页面上形成文章链接

3.导入图片，需要按照相应格式命名——"bg-xxx"的形式，"xxx"内可以包含数字，并使用下方代码进行排版，这个代码是两列瀑布式排列图片，应该可以适应大部分情况

4.正常提交上传到github即可


20250923：

1. 修改全局页宽，ctral+shift+F 召唤全局搜索，搜索关键词.container，找到最下方的_variable.scss文件，修改-xl部分即可
2. 修改导航栏字体大小，找到“.navbar-nav”代码，修改front-size即可。    
3. 修改段落宽度，通过增加栅格列宽让字符数目增大，这样就可以保留原来的一切设置同时增大段落占据页面的比例：打开post.html，找到代码后增大两个数字即可。

                                   <div class="col-lg-8 col-md-10 mx-auto"> 



4. 对代码产生高亮，高亮分为两种，一种是伴随网页诞生而直接渲染的，一种是浏览器客户端渲染。此模板不能用第一种渲染，所以只讲第二种渲染。首先增加head.html中的
代码（查阅对应文件）

其次要在md文件中使用```作为开头和结尾，并指定语言类别。


5. 对于代码页面UI增强效果，则需要在head.html中，直接添加代码（直接查看本网站的文件即可）

还要在main.sccs中添加代码（直接查看此网站代码）

6. 实现分页功能：

主要文件——assets/vendor/startbootstrap-clean-blot/pagination.js，新建这个文件，填入代码

主要文件——子页index.html文件，根目录新建子页名称为名的文件夹，并在其目录下新建index.html

主要文件——assets/main.scss

主要文件——根目录下，以子页名称命名的md文件

主要文件——JSON自动收集文章数据文件

下面讲解分页具体原理以及步骤。

此jekyll网站模板采用jekyll-paginate的v1版本，可以通过升级插件到jekyll-paginate-v2版本来实现任意界面的分页功能，但是由于修改文件过多且极其复杂，对于新手极难实现，因此我采用第二种方法——JavaScripts前端实现。

顾名思义，在浏览器客户端实现分页功能，并在打开网页过程中就已下载好所有文章数据，浏览起来快捷方便。经过412次网页部署与构建，终于在20250925下午16:50实现该分页功能，历时23小时+，为了便于后面回忆与复现，特此记录全部步骤。

步骤：

（1）将博客数据转换为JavaScript格式，需要在创建json文件（具体我不记得了，如果再次使用，可以问一下AI）
（2）在assets/vendor/startbootstrap-clean-blog/js中创建pagination.js文件
（3）写入代码如下：

```JavaScript
// 分页配置
const POSTS_PER_PAGE = 5;

// 初始化分页功能
function initPagination() {
    // 检查数据是否已加载
    if (!window.allPosts || window.allPosts.length === 0) {
        console.error("文章数据未加载！");
        document.getElementById('posts-container').innerHTML = '<p class="text-muted text-center py-5">No posts available</p>';
        document.getElementById('pagination').style.display = 'none';
        return;
    }
    
    const postsContainer = document.getElementById('posts-container');
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');
    const currentPageSpan = document.getElementById('current-page');
    const totalPagesSpan = document.getElementById('total-pages');
    
    // 获取当前分类（从页面变量获取）
    const currentCategory = window.currentCategory;
    console.log('当前页面分类:', currentCategory);
    
    // ✅ 修正：严格根据分类标签筛选文章
    let filteredPosts = window.allPosts;
    
    if (currentCategory && currentCategory !== 'null' && currentCategory !== 'undefined') {
        console.log('开始筛选文章，目标分类:', currentCategory);
        
        filteredPosts = window.allPosts.filter(post => {
            if (!post.categories || post.categories.length === 0) {
                return false;
            }
            
            // ✅ 修正：严格匹配分类标签（不区分大小写）
            const hasMatchingCategory = post.categories.some(category => {
                // 标准化分类标签比较
                const normalizedCategory = category.toLowerCase().replace(/\s+/g, '-');
                const normalizedTarget = currentCategory.toLowerCase().replace(/\s+/g, '-');
                return normalizedCategory === normalizedTarget;
            });
            
            return hasMatchingCategory;
        });
        
        console.log('筛选后文章数量:', filteredPosts.length);
        console.log('匹配的文章:', filteredPosts.map(p => ({
            title: p.title,
            categories: p.categories
        })));
    } else {
        console.log('未设置分类，显示所有文章');
    }
    
    // ✅ 去除重复文章（基于URL去重）
    const uniquePosts = [];
    const seenUrls = new Set();
    
    filteredPosts.forEach(post => {
        if (!seenUrls.has(post.url)) {
            seenUrls.add(post.url);
            uniquePosts.push(post);
        }
    });
    
    filteredPosts = uniquePosts;
    
    const totalPages = Math.ceil(filteredPosts.length / POSTS_PER_PAGE);
    totalPagesSpan.textContent = totalPages;
    
    let currentPage = 1;
    
    function renderPosts() {
        postsContainer.innerHTML = '';
        
        // 如果没有文章
        if (filteredPosts.length === 0) {
            postsContainer.innerHTML = `
                <div class="no-posts text-center py-5">
                    <h3 class="text-muted">暂无文章</h3>
                    <p class="text-muted">分类 "${currentCategory || '所有文章'}" 还没有发布任何文章。</p>
                </div>
            `;
            document.getElementById('pagination').style.display = 'none';
            return;
        }
        
        const startIndex = (currentPage - 1) * POSTS_PER_PAGE;
        const endIndex = Math.min(startIndex + POSTS_PER_PAGE, filteredPosts.length);
        
        for (let i = startIndex; i < endIndex; i++) {
            const post = filteredPosts[i];
            const postElement = document.createElement('article');
            postElement.className = 'post-preview';
            
            // ✅ 根据图片格式生成文章内容（不显示分类标签）
            postElement.innerHTML = `
                <a href="${post.url}">
                    <h2 class="post-title">${post.title}</h2>
                    <h3 class="post-subtitle">${post.subtitle || ''}</h3>
                </a>
                <p class="post-meta">
                    Posted by ${post.author} on ${post.date} &middot; ${post.read_time}
                </p>
            `;
            
            postsContainer.appendChild(postElement);
            
            // 添加分隔线（除了最后一篇文章）
            if (i < endIndex - 1) {
                const hr = document.createElement('hr');
                postsContainer.appendChild(hr);
            }
        }
    }
    
    function updatePagination() {
        currentPageSpan.textContent = currentPage;
        prevBtn.disabled = currentPage === 1;
        nextBtn.disabled = currentPage === totalPages;
        
        // 更新按钮样式
        prevBtn.classList.toggle('disabled', currentPage === 1);
        nextBtn.classList.toggle('disabled', currentPage === totalPages);
        
        // 如果没有文章或只有一页，隐藏分页控件
        if (filteredPosts.length <= POSTS_PER_PAGE) {
            document.getElementById('pagination').style.display = 'none';
        } else {
            document.getElementById('pagination').style.display = 'flex';
        }
    }
    
    function initPaginationControls() {
        renderPosts();
        updatePagination();
        
        prevBtn.addEventListener('click', () => {
            if (currentPage > 1) {
                currentPage--;
                renderPosts();
                updatePagination();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        });
        
        nextBtn.addEventListener('click', () => {
            if (currentPage < totalPages) {
                currentPage++;
                renderPosts();
                updatePagination();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        });
    }
    
    initPaginationControls();
}

// 页面加载时初始化
document.addEventListener('DOMContentLoaded', initPagination);

```
















<!-- <div style="
  column-count: 2;
  column-gap: 5px;
  max-width: 700px;
  margin: 0 auto;
">
  <img src="/img/bg-run.jpg" style="width:100%; margin-bottom:5px;">
  <img src="/img/bg-run1.jpg" style="width:100%; margin-bottom:5px;">
  <img src="/img/bg-run2.jpg" style="width:100%; margin-bottom:5px;">
  <img src="/img/bg-run3.jpg" style="width:100%; margin-bottom:5px;">
  <img src="/img/bg-run4.jpg" style="width:100%; margin-bottom:5px;">
</div>
-->
