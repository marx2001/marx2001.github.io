---
layout: post
title: "pythTB的学习_1"
subtitle: "Experience Sharing"
background: '/img/bg-sci-note.jpg'
categories: sci-note
permalink: /sci-note_posts/20251209-PythonTB
---


# <center>Recording​</center>


### 1. 介绍

PythTB是一款用于构建和分析紧束缚模型的Python库，专为现代拓扑能带论应用而设计。它提供了从模型设定到物理解释的高效路径，既适用于电子结构的学习，也可用于研究级别的计算。只需几行代码，您就
能定义晶格模型、构建紧束缚哈密顿量并计算电子性质。

PythTB提供一个从模型构建、计算分析到结果可视化的完整工作流，其六大核心功能模块如下：

模型构建：核心是TBModel类，用于定义和操作紧束缚哈密顿量，可设置在位能、跃迁项、自旋结构及参数依赖项。

态采样：通过Mesh类构建结构化的k空间和参数网格，并在网格上采样哈密顿量，将结果态（波函数）存储于WFArray对象中以供后续分析。

拓扑与量子几何计算：利用WFArray和TBModel的方法，计算一系列关键物理量，包括贝里相位/联络/曲率、陈数、轴子角、局域陈数标记、混合万尼尔函数及其他量子几何观测量。

Wannier90集成：通过W90类导入Wannier90软件生成的紧束缚哈密顿量，以便进行后处理及拓扑/量子几何分析。

万尼尔函数工作流：使用Wannier类从WFArray构造最大局域化万尼尔函数，可执行投影、解纠缠、评估展宽，并分析其中心与局域化性质。

可视化：利用内置工具绘制能带结构、态密度、晶格几何、跃迁图及交互式3D模型。

总结而言，PythTB是一个功能集成的计算平台，它不仅能便捷地构建和分析各类紧束缚模型，其突出特色在于深度集成了万尼尔函数构造与高阶拓扑/量子几何量计算的能力，并提供了从数据计算到图形呈现的完整分析链条。

### 2. 从pythTB开始

安装后，激活环境：
```shell

conda activate pythtb_env

```

剩余步骤参考官网：https://pythtb.readthedocs.io/en/latest/install.html

### 3. New to v2.0

在2.0.0版本中，我们引入了Lattice类，用以封装晶格几何的所有信息，包括晶格矢量、轨道位置和周期性。通过这种模块化设计，实现了关注点的分离：Lattice类负责处理几何细节，而TBModel类则专注于紧束缚模型本身。这一设计显著提升了代码的可读性、可维护性和可复用性。

```python

from pythtb import Lattice
import numpy as np

```
以下代码片段演示了如何使用Lattice类定义晶格并构建紧束缚模型。以蜂窝晶格（每个原胞含两个轨道）为例，首先给出晶格矢量：

<img src="/img/pythTB的学习_1/bg-c1.png" style="width:100%; margin-bottom:5px;">

为简化计算，取晶格常数a=1。轨道位置用约化坐标表示为：


此设定对应类似石墨烯的结构。通过Lattice类封装晶格几何信息，可实现晶格定义与模型构建的分离，提升代码的清晰度和可维护性。