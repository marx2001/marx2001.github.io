---
layout: post
title: "TB2J新版测试"
subtitle: "Experience Sharing"
background: '/img/bg-sci-note.jpg'
categories: sci-note
permalink: /sci-note_posts/20251201-tb2j-2
---

TB2J0.9.0+Wannier3.1.0+vasp6.4.3
# <center>Recording​</center>


### 1. 查看tb2j版本
```shell
pip show TB2J
```

新0.7.2.1版本的tb2j安装：

创建环境
```shell
conda create -n tb2j_env python=3.10 -y
```


进入环境：
```shell
conda activate tb2j_env
```

现升级为tb2j0.9.0版本。

```shell

pip install TB2J==0.9.0 -i https://pypi.tuna.tsinghua.edu.cn/simple

```

0.7.1.1版本的环境进入方法：
```shell
source /public/home/cssong/song/zhchen/1_materials/1_VTeCl/TB2J/strain/-2/TB2J_env/bin/activate
```


### 2. 运行

```shell

TB2J_rotate.py POSCAR --ftype vasp

```

生成三个旋转结构

总览：对三个目录中的结构分别执行DFT自洽计算，必须保持自旋沿着z方向，然后对每个结构运行TB2J。

下面是第一步

先对xyz结构进行wannier90拟合，窗口不变，在此之前要先做静态自洽计算，得到chgcar。

然后运行


```shell

wannier90.x wannier90 &

```
```shell

wann2J.py --spinor --groupby spin --efermi -1.065140 --emin -6.39197 --emax 1.2082 --elements Nb --kmesh 11 11 1 --nz 101 --rcut 6.0 --np 1

```

开始计算。

对y、z文件夹做同样的处理。 

最后收集平均值：

```shell

TB2J_merge.py  --type structure x y z

```