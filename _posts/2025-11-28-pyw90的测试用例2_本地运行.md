---
layout: post
title: "pyw90的测试用例2_本地运行"
subtitle: "Experience Sharing"
background: '/img/bg-sci-note.jpg'
categories: sci-note
permalink: /sci-note_posts/20251128-pyw-auto
---

https://github.com/Cloudiiink/pyw90/blob/master/README.md

首先以任意窗口成功地运行一次weannier90，得到wannier90_band.dat文件。准备好auto_w90_input.yaml文件。

修改auto_w90_input.yaml文件中的代码为：

```shell

# File location
#runfile: w90.script
vasp_band_file: bnd.dat
seedname: wannier90

# system
jobname: w90
username: xpwu

# run at the local machine not via SLURM
# ! YOU HAVE TO KNOWN WHAT YOU ARE DOING
# 
# If you have any question, please ask the administrator of your server. DO AT YOUR OWN RISK
# If you choose to run locally, you don't need to give `runfile` value
# how to run your job locally. Only used when `local` is `True`.
local: True

# ! IMPORTANT: Make sure you have added `wannier90.x` to your `$PATH` if you want to run as following
# single core
localrun: wannier90.x wannier90
```

然后运行

```shell

pyw90 pre ./band

```

得到vasp计算的bnd.dat文件

再运行
```shell

pyw90 auto run

```

设置窗口的技巧，能量上下限减去费米能级，即为origin作图的能带图的能量范围，可以根据dft计算的能量范围设计每一次迭代的能量上下限。

得到结果后，修改yml文件中的窗口范围，然后改变固定窗口，比如原来固定小窗口，优化大窗口，同时也要修改窗口变化的范围，大概看一眼能带，选择合适的区间