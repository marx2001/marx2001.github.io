---
layout: post
title: "20251111+科研日志"
subtitle: "Plan and Realization"
background: '/img/bg-sci-log.jpg'
categories: sci-log
permalink: /sci-log_posts/20251111-sci-log/
---

### 今日日程：

1. wannier90能带拟合




### 日志

1. 计算完static和bandsoc能带，绘制完投影能带图，准备wannier90能带拟合，由于O的贡献极小，先
暂时忽略O的贡献，则费米能级附近总能带数为26。尝试计算


``` python

num_bands = 32
num_wann = 26
!exclude_bands 1-5 

!modifiable from run.py
dis_win_min = -2.6972384
dis_win_max = 0.78658065
dis_froz_min = 0.276182
dis_froz_max = 1.109352
dis_num_iter = 0
num_iter = 0

write_hr =.true.   #step2
bands_plot =.true. 

search_shells=30
kmesh_tol = 0.00001

begin projections
Nb  :   d
Se  :   p

end projections

```

上述win文件报错，修改无数次后终于完整的计算了一次，核数一定要等于能带数，不然会报错

``` python

num_bands = 32
num_wann = 20
!exclude_bands 1-5 

!modifiable from run.py
dis_win_min = -2.6972384
dis_win_max = 0.78658065
dis_froz_min = 0.276182
dis_froz_max = 1.109352
dis_num_iter = 0
num_iter = 0

#write_hr =.true.   #step2
bands_plot =.true. 

begin projections
Nb  :   d


end projections

begin kpoint_path
  G  0.000000  0.000000  0.000000   X  0.500000  0.000000  0.000000   
  X  0.500000  0.000000  0.000000   M 0.500000  0.500000  0.000000 
  M 0.500000  0.500000  0.000000   Y  0.000000  0.500000  0.000000
  Y  0.000000  0.500000  0.000000   G  0.000000  0.000000  0.000000
end kpoint_path
spinors = .true.

begin unit_cell_cart
     4.1630312     0.0000000     0.0000000
     0.0000000     4.1630215     0.0000000
     0.0000000     0.0000000    16.6440706
end unit_cell_cart

begin atoms_cart
Nb       0.0000036     2.0815115     8.3822581
Nb       2.0815147     4.1630168     8.3823108
Se       4.1630297     4.1630213    10.1566570
Se       4.1630287     0.0000037     6.5912660
O        2.0815170     2.0815114     8.0976843
end atoms_cart

mp_grid =     3     3     1

begin kpoints
      0.000000000000      0.000000000000      0.000000000000
      0.333333333333      0.000000000000      0.000000000000
     -0.333333333333      0.000000000000      0.000000000000
      0.000000000000      0.333333333333      0.000000000000
      0.333333333333      0.333333333333      0.000000000000
     -0.333333333333      0.333333333333      0.000000000000
      0.000000000000     -0.333333333333      0.000000000000
      0.333333333333     -0.333333333333      0.000000000000
     -0.333333333333     -0.333333333333      0.000000000000
end kpoints


```

还是显示k点不匹配mismatch，重新设置NBANDS=64，计算静态自洽以及能带,更新win文件：

``` shell

num_bands = 64
num_wann = 38
!exclude_bands 1-5 

!modifiable from run.py
dis_win_min = -2.6972384
dis_win_max = 1.109352
dis_froz_min = 0.276182
dis_froz_max = 1.109352
dis_num_iter = 0
num_iter = 0

#!write_hr =.true.   #step2
bands_plot =.true. 

search_shells=30
kmesh_tol = 0.00001

begin projections
Nb  :   d
Se : p
O : p

end projections
begin kpoint_path
  G  0.000000  0.000000  0.000000   X  0.500000  0.000000  0.000000   
  X  0.500000  0.000000  0.000000   M 0.500000  0.500000  0.000000 
  M 0.500000  0.500000  0.000000   Y  0.000000  0.500000  0.000000
  Y  0.000000  0.500000  0.000000   G  0.000000  0.000000  0.000000
end kpoint_path

```

再次调试：

```shell

num_bands = 64
num_wann = 38
!exclude_bands 1-5 

!modifiable from run.py
dis_win_min = -2.74363+-1.063802=-3.807432
dis_win_max = 2.53084+-1.063802=1.467038
dis_froz_min = -1.56876+-1.063802=-2.632562
dis_froz_max = 0.98925+-1.063802=-0.074553
dis_num_iter = 0
num_iter = 0

#!write_hr =.true.   #step2
bands_plot =.true. 

search_shells=30
kmesh_tol = 0.00001

begin projections
Nb  :   d
Se : p
O : p

end projections
begin kpoint_path
  G  0.000000  0.000000  0.000000   X  0.500000  0.000000  0.000000   
  X  0.500000  0.000000  0.000000   M 0.500000  0.500000  0.000000 
  M 0.500000  0.500000  0.000000   Y  0.000000  0.500000  0.000000
  Y  0.000000  0.500000  0.000000   G  0.000000  0.000000  0.000000
end kpoint_path

spinors = .true.

begin unit_cell_cart
     4.1630312     0.0000000     0.0000000
     0.0000000     4.1630215     0.0000000
     0.0000000     0.0000000    16.6440706
end unit_cell_cart

begin atoms_cart
Nb       0.0000036     2.0815115     8.3822581
Nb       2.0815147     4.1630168     8.3823108
Se       4.1630297     4.1630213    10.1566570
Se       4.1630287     0.0000037     6.5912660
O        2.0815170     2.0815114     8.0976843
end atoms_cart

mp_grid =     8     8     1

begin kpoints
      0.000000000000      0.000000000000      0.000000000000
      0.125000000000      0.000000000000      0.000000000000
      0.250000000000      0.000000000000      0.000000000000
      0.375000000000      0.000000000000      0.000000000000
      0.500000000000      0.000000000000      0.000000000000
     -0.375000000000      0.000000000000      0.000000000000
     -0.250000000000      0.000000000000      0.000000000000
     -0.125000000000      0.000000000000      0.000000000000
      0.000000000000      0.125000000000      0.000000000000
      0.125000000000      0.125000000000      0.000000000000
      0.250000000000      0.125000000000      0.000000000000
      0.375000000000      0.125000000000      0.000000000000
      0.500000000000      0.125000000000      0.000000000000
     -0.375000000000      0.125000000000      0.000000000000
     -0.250000000000      0.125000000000      0.000000000000
     -0.125000000000      0.125000000000      0.000000000000
      0.000000000000      0.250000000000      0.000000000000
      0.125000000000      0.250000000000      0.000000000000
      0.250000000000      0.250000000000      0.000000000000
      0.375000000000      0.250000000000      0.000000000000
      0.500000000000      0.250000000000      0.000000000000
     -0.375000000000      0.250000000000      0.000000000000
     -0.250000000000      0.250000000000      0.000000000000
     -0.125000000000      0.250000000000      0.000000000000
      0.000000000000      0.375000000000      0.000000000000
      0.125000000000      0.375000000000      0.000000000000
      0.250000000000      0.375000000000      0.000000000000
      0.375000000000      0.375000000000      0.000000000000
      0.500000000000      0.375000000000      0.000000000000
     -0.375000000000      0.375000000000      0.000000000000
     -0.250000000000      0.375000000000      0.000000000000
     -0.125000000000      0.375000000000      0.000000000000
      0.000000000000      0.500000000000      0.000000000000
      0.125000000000      0.500000000000      0.000000000000
      0.250000000000      0.500000000000      0.000000000000
      0.375000000000      0.500000000000      0.000000000000
      0.500000000000      0.500000000000      0.000000000000
     -0.375000000000      0.500000000000      0.000000000000
     -0.250000000000      0.500000000000      0.000000000000
     -0.125000000000      0.500000000000      0.000000000000
      0.000000000000     -0.375000000000      0.000000000000
      0.125000000000     -0.375000000000      0.000000000000
      0.250000000000     -0.375000000000      0.000000000000
      0.375000000000     -0.375000000000      0.000000000000
      0.500000000000     -0.375000000000      0.000000000000
     -0.375000000000     -0.375000000000      0.000000000000
     -0.250000000000     -0.375000000000      0.000000000000
     -0.125000000000     -0.375000000000      0.000000000000
      0.000000000000     -0.250000000000      0.000000000000
      0.125000000000     -0.250000000000      0.000000000000
      0.250000000000     -0.250000000000      0.000000000000
      0.375000000000     -0.250000000000      0.000000000000
      0.500000000000     -0.250000000000      0.000000000000
     -0.375000000000     -0.250000000000      0.000000000000
     -0.250000000000     -0.250000000000      0.000000000000
     -0.125000000000     -0.250000000000      0.000000000000
      0.000000000000     -0.125000000000      0.000000000000
      0.125000000000     -0.125000000000      0.000000000000
      0.250000000000     -0.125000000000      0.000000000000
      0.375000000000     -0.125000000000      0.000000000000
      0.500000000000     -0.125000000000      0.000000000000
     -0.375000000000     -0.125000000000      0.000000000000
     -0.250000000000     -0.125000000000      0.000000000000
     -0.125000000000     -0.125000000000      0.000000000000
end kpoints


```

能带数包含少了，报错：dis_windows: Energy window contains fewer states than number of target WFs
 Error on node 0: examine the output/error files for details
Abort(1) on node 0 (rank 0 in comm 0): application called MPI_Abort(MPI_COMM_WORLD, 1) - process 0

解决方法：提升0.05的dis_win_min =-3.857432    dis_win_max =1.517038

再次测试，结果如下：

dis_windows: Energy window contains fewer states than number of target WFs
 Error on node 0: examine the output/error files for details
Abort(1) on node 0 (rank 0 in comm 0): application called MPI_Abort(MPI_COMM_WORLD, 1) - process 0

能带数包含少了，报错：dis_windows: Energy window contains fewer states than number of target WFs
 Error on node 0: examine the output/error files for details
Abort(1) on node 0 (rank 0 in comm 0): application called MPI_Abort(MPI_COMM_WORLD, 1) - process 0

解决方法：提升0.05的dis_win_min =-3.907432 , dis_win_max =1.567038
### 实际日程

1. 继续研究，先写正文，赶紧让老板修改

2. 比较能带，重新结构优化新材料