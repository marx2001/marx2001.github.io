---
layout: post
title: "vasp计算能带"
subtitle: "Scripts made by myself"
background: '/img/bg-sci-note.jpg'
categories: sci-note
permalink: /sci-note_posts/20250924-scripts/
---

## <center>Vasp计算能带</center>

# 介绍
<p>
　　能带计算作为最基本的计算，也有其合理的步骤以及注意事项。
</p>

# 1.进行静态自洽计算（static）
以MPSS为例，其结构如图所示

<img src="/img/vasp计算能带/bg-s1.png" alt="MPSS结构图" style="width:300px; height:auto;"/>

<img src="/img/vasp计算能带/bg-s2.png" alt="MPSS结构图" style="width:300px; height:auto;"/>

首先准备INCAR

```python
SYSTEM = MPSS
LREAL= Auto 
ALGO= Fast

ISTART = 0
ICHARG = 2

ENCUT = 520
NCORE= 4

#IVDW=11
ISMEAR = 0 
SIGMA = 0.04
GGA=PE

LORBIT=12

ISPIN=2
#MAGMOM = 1*4.0  2*0.0
LMAXMIX=4
#Amin = 0.01

VOSKOWN = 1
ISYM = 2
GGA_COMPAT = .FALSE.
LWAVE=.F
LCHARG=.T
EDIFF = 1E-6 
EDIFFG = -0.01

LDAU=.T
LDAUTYPE=2
LDAUL=2 2 -1 -1                  #库伦排斥的轨道，对应元素
LDAUU=0.5 2.0 0.0 0.0        #几个元素几个数
LDAUJ=0.0 0.0 0.0 0.0           #stoner交换参数大小
LDAUPRINT = 2

```

由于是磁性体系，所以要增加很多设置，虽然部分设置是隐式开启或者关闭的，但根据官网的说法，显式地设置出来，也会起到一定的作用。

注意，个人习惯先用AGLO=Fast,这样计算速度快，可以快速了解大概的情况，同时第一次计算的时候，可以取小K点，同样使得计算速度快。单层材料不加IVDW范德华修正。
个人习惯开启自旋极化后不设置磁矩，让其自行演化，得到最准确的基态。static计算较快，因此不设置混合系数也是可以的。

LCHARG必须开启，因为能带计算必须要用到CHGCAR才能足够精确。

对于强关联体系，必须加U，具体数值自行测试。

提交static任务计算脚本后等待结果。

# 2.进行能带计算（重点）


这个计算需要注意一个情况，必须设置ISTART=1，ICHARG=11，原因如下方注释所言。而且NBANDS不要设置，避免浪费时间。band计算不开启自旋轨道耦合（SOC），如果想看考虑自旋轨道耦合的结果，则取消LSORBIT和LORBMOM的注释即可。

INCAR如下

```python
SYSTEM =  BrSeCr
LREAL= Auto
ALGO= Normal

ISTART = 1
ICHARG = 11 #=11用于电子能带和态密度计算，此过程中电荷密度不变

ENCUT =520
NCORE= 4

ISMEAR = 0 
SIGMA = 0.04
GGA=PE

ISPIN=2
MAGMOM = 0 4 8*0

#LSORBIT=.TRUE.
#LORBMOM=.TRUE.

LWAVE=.F; 
LCHARG=.F
EDIFF = 1E-6
EDIFFG = -0.01
ISYM = 0
VOSKOWN=1
GGA_COMPAT =.F

#NBANDS=50
#NEDOS=301
LORBIT=11         #常用=11，输出包含IM投影的PROCAR和DOSCAR
LDAU=.T
LDAUTYPE=2
LDAUL=2 2 -1 -1                  #库伦排斥的轨道，对应元素
LDAUU=0.5 2.0 0.0 0.0        #几个元素几个数
LDAUJ=0.0 0.0 0.0           #stoner交换参数大小
LMAXMIX=4


```

