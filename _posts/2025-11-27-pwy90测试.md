---
layout: post
title: "wannier90汇总"
subtitle: "Experience Sharing"
background: '/img/bg-sci-note.jpg'
categories: sci-note
permalink: /sci-note_posts/2025112-pyw
---

## <center>心得笔记</center>

拟合完的指令：wannier90.x wannier90 &
激活TB2J：source /public/home/cssong/song/zhchen/1_materials/1_VTeCl/TB2J/strain/-2/TB2J_env/bin/activate

进入pyw90环境：conda activate pyw90_env
pyw90 eig suggest --path . -e -20 20 -w 20 在选定能量区间内计算推荐的内外能量窗口的范围

求平均值：TB2J_merge.py  --type structure x y z 

求磁耦合参数：wann2J.py --spinor --groupby spin --efermi -1.0098 --emin -2.06514 --emax -0.065 --elements Nb --kmesh 9 9 1 --nz 100 --rcut 6.0 --np 1  第一次测试



### 测试1

conda activate pyw90_env

pyw90 eig suggest --path . -e -20 20 -w 38

<img src="/img/pwy90测试/bg-c1.png" style="width:100%; margin-bottom:5px;">

有个问题，为什么大窗口不满足38个states，而小窗口反而有38个states?

<img src="/img/pwy90测试/bg-c2.png" style="width:100%; margin-bottom:5px;">

<img src="/img/pwy90测试/bg-c3.png" style="width:100%; margin-bottom:5px;">

<img src="/img/pwy90测试/bg-c4.png" style="width:100%; margin-bottom:5px;">

还是有一个问题，这个pyw90判定不足38个态，但是实际上wannier90拟合能带的时候并没有报错，反而拟合的很好，与原来能带完全重合

<img src="/img/pwy90测试/bg-c5.png" style="width:100%; margin-bottom:5px;">

<img src="/img/pwy90测试/bg-c6.png" style="width:100%; margin-bottom:5px;">

<img src="/img/pwy90测试/bg-c7.png" style="width:100%; margin-bottom:5px;">

<img src="/img/pwy90测试/bg-c8.png" style="width:100%; margin-bottom:5px;">

<img src="/img/pwy90测试/bg-c9.png" style="width:100%; margin-bottom:5px;">

与我的已经成功拟合且百分百重合的能带相比，能量窗口的范围，应该是相对靠谱的，可能需要后期手动再调整，可以说能够当作一个预判工具：

<img src="/img/pwy90测试/bg-c10.png" style="width:100%; margin-bottom:5px;">

<img src="/img/pwy90测试/bg-c11.png" style="width:100%; margin-bottom:5px;">